<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Exercice - GameCrafters</title>
    <link href="./public/style.css" rel="stylesheet">
    <script type="module">
        import { library, dom } from "@fortawesome/fontawesome-svg-core";
        import { faHome, faDumbbell, faLightbulb, faUser, faShoppingCart } from "@fortawesome/free-solid-svg-icons";

        library.add(faHome, faDumbbell, faLightbulb, faUser, faShoppingCart);
        dom.watch();
    </script>
</head>
<body class="bg-[#2d133d] text-white font-sans min-h-screen flex flex-col">

    <div class="flex flex-grow">
        <!-- Sidebar -->
        <nav class="w-64 h-screen bg-[#1a0b25] p-5 fixed top-0 left-0">
            <h2 class="text-center text-xl font-bold mb-5">GameCrafters</h2>
            <ul class="space-y-3">
                <li class="p-4 flex items-center cursor-pointer transition duration-300 hover:bg-[#7f00ff] rounded-md">
                    <i class="fas fa-home mr-2"></i> Home
                </li>
                <li class="p-4 flex items-center bg-[#7f00ff] rounded-md">
                    <i class="fas fa-dumbbell mr-2"></i> Exercices
                </li>
                <li class="p-4 flex items-center cursor-pointer transition duration-300 hover:bg-[#7f00ff] rounded-md">
                    <i class="fas fa-lightbulb mr-2"></i> Advices
                </li>
                <li class="p-4 flex items-center cursor-pointer transition duration-300 hover:bg-[#7f00ff] rounded-md">
                    <i class="fas fa-user mr-2"></i> Profil
                </li>
                <li class="p-4 flex items-center cursor-pointer transition duration-300 hover:bg-[#7f00ff] rounded-md">
                    <i class="fas fa-shopping-cart mr-2"></i> Shop
                </li>
            </ul>
        </nav>

        <!-- Contenu principal -->
        <div class="ml-72 flex flex-col items-center justify-center flex-grow p-5 text-center">
            <h1 id="exercise-title" class="text-4xl font-bold mb-5">Exercice</h1>
            <div class="timer flex flex-col items-center">
                <div class="w-28 h-28 flex items-center justify-center bg-white bg-opacity-10 border-2 border-white border-opacity-30 shadow-lg rounded-full animate-pulse">
                    <i class="fas fa-wind text-4xl text-white"></i>
                </div>
                <p id="exercise-name" class="mt-3 text-lg"></p>
                <p id="countdown" class="text-3xl font-bold mt-2">--:--</p>
            </div>
            <div class="flex gap-4 mt-5">
                <button id="pause-btn" class="px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-500">⏸ Pause</button>
                <button id="reset-btn" class="px-4 py-2 bg-gray-800 text-white rounded-md hover:bg-gray-700">Reset</button>
            </div>
            <button id="done-btn" class="px-5 py-2 mt-5 bg-gradient-to-r from-[#7f00ff] to-[#e100ff] text-white rounded-md hover:from-[#e100ff] hover:to-[#7f00ff]">
                Done
            </button>
        </div>
    </div>

    <!-- Footer -->
    <footer class="bg-[#1a0b25] text-center py-3 w-full fixed bottom-0">
        <p>© 2025 GameCrafters. All Rights Reserved.</p>
    </footer>

    <script>
        document.addEventListener("DOMContentLoaded", function() {
            let selectedExercise = localStorage.getItem("selectedExercise");
            let selectedTime = localStorage.getItem("selectedTime"); // Temps choisi en secondes

            if (selectedExercise) {
                document.getElementById("exercise-title").textContent = selectedExercise.charAt(0).toUpperCase() + selectedExercise.slice(1) + " Exercise";
                document.getElementById("exercise-name").textContent = "Exercice sélectionné : " + selectedExercise.charAt(0).toUpperCase() + selectedExercise.slice(1);
            }

            let time = selectedTime ? parseInt(selectedTime) : 60;
            let initialTime = time;
            let timer;
            let countdownElement = document.getElementById("countdown");
            let pauseButton = document.getElementById("pause-btn");
            let resetButton = document.getElementById("reset-btn");
            let doneButton = document.getElementById("done-btn");

            function updateCountdownDisplay() {
                let minutes = Math.floor(time / 60);
                let seconds = time % 60;
                countdownElement.textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            }

            function startTimer() {
                timer = setInterval(() => {
                    if (time > 0) {
                        time--;
                        updateCountdownDisplay();
                    } else {
                        clearInterval(timer);
                        alert("Exercice terminé !");
                    }
                }, 1000);
            }

            updateCountdownDisplay();
            startTimer();

            pauseButton.addEventListener("click", function() {
                if (pauseButton.textContent.includes("Pause")) {
                    clearInterval(timer);
                    pauseButton.textContent = "▶ Resume";
                } else {
                    startTimer();
                    pauseButton.textContent = "⏸ Pause";
                }
            });

            resetButton.addEventListener("click", function() {
                clearInterval(timer);
                time = initialTime;
                updateCountdownDisplay();
                startTimer();
                pauseButton.textContent = "⏸ Pause";
            });

            doneButton.addEventListener("click", function() {
                alert("Exercice terminé avec succès !");
                window.location.href = "exercice1.html";
            });
        });
    </script>
</body>
</html>
